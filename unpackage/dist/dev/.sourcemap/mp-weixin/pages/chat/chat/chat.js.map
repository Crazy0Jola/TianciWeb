{"version":3,"sources":["webpack:///E:/天赐/TianciWeb/main.js","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?8b87","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?b44f","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?15ac","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?d57b","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?5cbf","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?500a"],"names":["createPage","Page","_this","JIM","getApp","globalData","components","freeNavBar","freeIconButton","freeChatItem","freePopup","freeMainButton","data","mode","tempurl","username","nickname","avator","myUsername","myAvator","actionList","name","icon","event","emoticonList","KeyboardHeight","menus","navBarHeight","list","propIndex","text","isRecording","RecordingStartY","unRecord","onLoad","e","pageToBottomTimer","setTimeout","pageToBottom","clearTimeout","uni","getStorageSync","onShow","$on","msg","resetUnreadCount","now","Date","past","now_year","getFullYear","now_month","getMonth","now_day","getDate","now_hour","getHours","now_minutes","getMinutes","now_seconds","getSeconds","now_date","past_yaer","past_month","past_day","past_hour","past_minutes","past_seconds","past_date","showLoading","request","url","header","success","res","messages","$data","map","elem","index","msg_type","setPic","msg_body","media_id","hideLoading","mounted","statusBarHeight","upx2px","onKeyboardHeightChange","height","regSendVoiceEvent","send","time","RecordTime","computed","RECORD","state","audio","maskBottom","getMenusHeight","H","length","getMenusStyle","isdoSelf","target_id","menusList","filter","v","chatBodyBottom","emoticonOrActionList","imageList","arr","forEach","item","type","push","watch","newValue","oldValue","$refs","action","hide","hideKeyboard","created","__init","methods","total","page","Math","ceil","i","start","j","no","image_cache","image_url","getStorage","key","tempFilePath","fail","downloadFile","statusCode","setStorage","getResource","onSuccess","setStorageSync","onFail","console","log","JSON","stringify","reject","openActionOrEmoticon","show","options","_that","latest_msg","sendSingleMsg","obj","getTime","msg_id","updateConversation","sendSinglePic","content","showToast","title","sendSingleFile","sendSingleVedio","create_time","long","x","y","extend","clickEvent","extras","isremove","actionEvent","chooseImage","count","tempFilePaths","chooseVideo","maxDuration","duration","clickPage","previewImage","current","urls","indicator","changeVoiceOrText","voiceTouchStart","changedTouches","screenY","format","voiceTouchEnd","stop","voiceTouchCancel","voiceTouchMove","Y","abs","openChatSet","navigateTo"],"mappings":"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","file":"pages/chat/chat/chat.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/chat/chat/chat.nvue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./chat.nvue?vue&type=template&id=5b9d412e&\"\nimport script from \"./chat.nvue?vue&type=script&lang=js&\"\nexport * from \"./chat.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.nvue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('5b9d412e', component.options)\n    } else {\n      api.reload('5b9d412e', component.options)\n    }\n    module.hot.accept(\"./chat.nvue?vue&type=template&id=5b9d412e&\", function () {\n      api.rerender('5b9d412e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"天赐/TianciWeb/pages/chat/chat/chat.nvue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=template&id=5b9d412e&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.mode = \"text\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.KeyboardHeight = 0\n    }\n  }\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\nimport freeNavBar from \"@/components/free-ui/free-nav-bar.vue\"\nimport freeIconButton from \"@/components/free-ui/free-icon-button.vue\"\nimport freeChatItem from '@/components/free-ui/free-chat-item.vue';\nimport freePopup from \"@/components/free-ui/free-popup.vue\"\nimport freeMainButton from '@/components/free-ui/free-main-button.vue';\n\n\nimport { mapState,mapMutations } from 'vuex'\nvar _this;\nvar JIM = getApp().globalData.JIM;\nexport default {\n\tcomponents: {\n\t\tfreeNavBar,\n\t\tfreeIconButton,\n\t\tfreeChatItem,\n\t\tfreePopup,\n\t\tfreeMainButton\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 模式 text输入文字，emoticon表情，action操作，audio音频\n\t\t\tmode:\"text\",\n\t\t\ttempurl:\"\",\n\t\t\tusername:\"\",\n\t\t\tnickname:\"\",\n\t\t\tavator:\"/static/images/userpic.jpg\",\n\t\t\tmyUsername:\"\",\n\t\t\tmyAvator:\"/static/images/userpic.jpg\",\n\t\t\t// 扩展菜单列表\n\t\t\tactionList:[\n\t\t\t\t[{\n\t\t\t\t\tname:\"相册\",\n\t\t\t\t\ticon:\"/static/images/extends/pic.png\",\n\t\t\t\t\tevent:\"uploadImage\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"拍摄\",\n\t\t\t\t\ticon:\"/static/images/extends/video.png\",\n\t\t\t\t\tevent:\"uploadVideo\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"收藏\",\n\t\t\t\t\ticon:\"/static/images/extends/shoucan.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"名片\",\n\t\t\t\t\ticon:\"/static/images/extends/man.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"语音通话\",\n\t\t\t\t\ticon:\"/static/images/extends/phone.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"位置\",\n\t\t\t\t\ticon:\"/static/images/extends/path.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t}]\n\t\t\t],\n\t\t\temoticonList:[],\n\t\t\t// 键盘高度\n\t\t\tKeyboardHeight:0,\n\t\t\tmenus:[{ \n\t\t\t\tname:\"复制\",\n\t\t\t\tevent:'',\n\t\t\t},{ \n\t\t\t\tname:\"删除\",\n\t\t\t\tevent:''\n\t\t\t},{ \n\t\t\t\tname:\"撤回\",\n\t\t\t\tevent:'removeChatItem'\n\t\t\t}],\n\t\t\tnavBarHeight:0,\n\t\t\tlist:[],\n\t\t\t// 当前操作的气泡索引\n\t\t\tpropIndex:-1,\n\t\t\t// 输入文字\n\t\t\ttext:\"\",\n\t\t\t\n\t\t\t// 音频录制状态\n\t\t\tisRecording:false,\n\t\t\tRecordingStartY:0,\n\t\t\t// 取消录音\n\t\t\tunRecord:false\n\t\t}\n\t},\n\tonLoad:function(e){\n\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t_this.pageToBottom()\n\t\t\tclearTimeout(pageToBottomTimer)\n\t\t},500)\n\t\t_this=this;\n\t\t_this.username = e.username;\n\t\t_this.nickname = e.nickname;\n\t\t_this.myUsername = uni.getStorageSync('setUserData').username;\n\t},\n\tonShow(){\t\t\t\t\t\t\n\t\t// var imagepath=_this.image_cache(\"https://img.jiguang.cn/im-portal/0.0.1/assets/img/jverify-flow-banner-new.png\",\"a\");\n\t\t// var p = plus.io.convertLocalFileSystemURL(imagepath);  \n\t\t// console.log(p)\n\t\tuni.$on(\"get_msg\",function(){\n\t\t\tvar msg = uni.getStorageSync(_this.username);\n\t\t\t_this.list=msg;\n\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t_this.pageToBottom()\n\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t},200)\n\t\t})\n\t\tvar msg = uni.getStorageSync(_this.username);\n\t\tJIM.resetUnreadCount({\n\t\t\t'username' : _this.username\n\t\t});\n\t\tif(msg){\n\t\t\t_this.list=msg;\n\t\t\t// var pageToBottomTimer = setTimeout(()=>{\n\t\t\t// \t_this.pageToBottom()\n\t\t\t// \tclearTimeout(pageToBottomTimer)\n\t\t\t// },500)\n\t\t}else{\n\t\t\tvar now = new Date()\n\t\t\tvar past = new Date(new Date()-86400000*7)\n\t\t\t\n\t\t\tvar now_year = now.getFullYear();\n\t\t\tvar now_month = now.getMonth()+1;\n\t\t\tvar now_day = now.getDate();\n\t\t\tvar now_hour = now.getHours();\n\t\t\tvar now_minutes = now.getMinutes();\n\t\t\tvar now_seconds = now.getSeconds();\n\t\t\t\n\t\t\tif(now_month<10){\n\t\t\t\tnow_month=\"0\"+now_month;\n\t\t\t}\n\t\t\tif(now_day<10){\n\t\t\t\tnow_day=\"0\"+now_day;\n\t\t\t}\n\t\t\tif(now_hour<10){\n\t\t\t\tnow_hour=\"0\"+now_hour;\n\t\t\t}\n\t\t\tif(now_minutes<10){\n\t\t\t\tnow_minutes=\"0\"+now_minutes;\n\t\t\t}\n\t\t\tif(now_seconds<10){\n\t\t\t\tnow_seconds=\"0\"+now_seconds;\n\t\t\t}\n\t\t\tvar now_date = now_year+\"-\"+now_month+\"-\"+now_day+\"%20\"+now_hour+\":\"+now_minutes+\":\"+now_seconds\n\t\t\t\n\t\t\tvar past_yaer = past.getFullYear();\n\t\t\tvar past_month = past.getMonth()+1;\n\t\t\tvar past_day = past.getDate();\n\t\t\tvar past_hour = past.getHours();\n\t\t\tvar past_minutes = past.getMinutes();\n\t\t\tvar past_seconds = past.getSeconds();\n\t\t\tif(past_month<10){\n\t\t\t\tpast_month=\"0\"+past_month;\n\t\t\t}\n\t\t\tif(past_day<10){\n\t\t\t\tpast_day=\"0\"+past_day;\n\t\t\t}\n\t\t\tif(past_hour<10){\n\t\t\t\tpast_hour=\"0\"+past_hour;\n\t\t\t}\n\t\t\tif(past_minutes<10){\n\t\t\t\tpast_minutes=\"0\"+past_minutes;\n\t\t\t}\n\t\t\tif(past_seconds<10){\n\t\t\t\tpast_seconds=\"0\"+past_seconds;\n\t\t\t}\n\t\t\tvar past_date = past_yaer+\"-\"+past_month+\"-\"+past_day+\"%20\"+past_hour+\":\"+past_minutes+\":\"+past_seconds\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\t\"title\":\"正在获取聊天记录...\"\n\t\t\t})\n\t\t\tuni.request({\n\t\t\t\turl: 'https://report.im.jpush.cn/v2/users/' + _this.username +\n\t\t\t\t\t'/messages?count=1000&begin_time='+past_date+'&end_time='+now_date,\n\t\t\t\theader: {\n\t\t\t\t\t\"Authorization\": 'Basic MDk5NzA4NzZmMzNlODg0YTM2MjQzMzVjOmU4ZTg3M2U2MDI0NTMxNWE3MGVkZTRiMg=='\n\t\t\t\t},\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tvar msg = res.data.messages\n\t\t\t\t\t// msg.forEach(function(item){\n\t\t\t\t\t// \tif(item.msg_type==\"image\"){\n\t\t\t\t\t// \t\tJIM.getResource({'media_id' :item.msg_body.media_id}).onSuccess(function(data){\n\t\t\t\t\t// \t\t\titem.msg_body.media_id = data.url;\n\t\t\t\t\t// \t\t\tconsole.log('success:' + JSON.stringify(data));\n\t\t\t\t\t// \t\t}).onFail(function(data){\n\t\t\t\t\t// \t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t\t// \t\t});\n\t\t\t\t\t// \t}\t\n\t\t\t\t\t// })\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t_this.$data.list=msg;\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t_this.$data.list.map(function(elem,index){\n\t\t\t\t\t    if(elem.msg_type!=\"text\"){\n\t\t\t\t\t    \t_this.setPic(elem.msg_body.media_id,index);\n\t\t\t\t\t    }\n\t\t\t\t\t})\n\t\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tuni.hideLoading()\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t// var phone=[];\n\t\t// phone.push(\"18952158867\");\n\t\t// phone.push(\"18012018031\");\n\t\t// uni.request({\n\t\t// \turl: 'http://117.83.152.39:8081/interconnect/appUser/getUserPhotoByPhone',\n\t\t// \theader: {\n\t\t// \t\t\"token\": '06874c8b7be14969abac9a18935b18b8',\n\t\t// \t\t\"Content-Type\":\"application/json\"\n\t\t// \t},\n\t\t// \tmethod:\"POST\",\n\t\t// \tdata:{\n\t\t// \t\t// phones:JSON.stringify(phone)\n\t\t// \t},\n\t\t// \tsuccess(res) {\n\t\t// \t\tconsole.log(res)\n\t\t// \t}\n\t\t// })\n\t},\n\tmounted() {\n\n\n\n\t\tthis.navBarHeight = statusBarHeight + uni.upx2px(90)\n\t\t\n\t\t// 监听键盘高度变化\n\t\tuni.onKeyboardHeightChange(res => {\n\t\t  if (this.mode !== 'action' && this.mode !== 'emoticon') {\n\t\t  \tthis.KeyboardHeight = res.height \n\t\t  }\n\t\t  if (this.KeyboardHeight > 0) {\n\t\t  \tthis.pageToBottom()\n\t\t  }\n\t\t})\n\t\t\n\t\t\n\t\t// 注册发送音频事件\n\t\tthis.regSendVoiceEvent((url)=>{\n\t\t\tif (!this.unRecord) {\n\t\t\t\tthis.send('audio',url,{\n\t\t\t\t\ttime:this.RecordTime\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tRECORD:state=>state.audio.RECORD,\n\t\t\tRecordTime:state=>state.audio.RecordTime\n\t\t}),\n\t\t// 获取蒙版的位置\n\t\tmaskBottom(){\n\t\t\treturn this.KeyboardHeight + uni.upx2px(105)\n\t\t},\n\t\t// 动态获取菜单高度\n\t\tgetMenusHeight(){\n\t\t\tlet H = 100\n\t\t\treturn this.menus.length * H\n\t\t},\n\t\t// 获取菜单的样式\n\t\tgetMenusStyle(){\n\t\t\treturn `height: ${this.getMenusHeight}rpx;`\n\t\t},\n\t\t// 判断是否操作本人信息\n\t\tisdoSelf(){\n\t\t\tlet target_id = _this.propIndex > -1 ? _this.list[_this.propIndex].target_id : 0\n\t\t\treturn target_id !== _this.myUsername\n\t\t},\n\t\t// 获取操作菜单\n\t\tmenusList(){\n\t\t\treturn this.menus.filter(v=>{\n\t\t\t\tif (v.name === '撤回' && !this.isdoSelf) {\n\t\t\t\t\treturn false\n\t\t\t\t} else {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 聊天区域bottom\n\t\tchatBodyBottom(){\n\t\t\treturn `bottom:${uni.upx2px(105) + this.KeyboardHeight}px;top:${this.navBarHeight}px;`\n\t\t},\n\t\t// 获取操作或者表情列表\n\t\temoticonOrActionList(){\n\t\t\treturn (this.mode === 'emoticon' || this.mode === 'action') ? this[this.mode+'List'] : []\n\t\t},\n\t\t// 所有信息的图片地址\n\t\timageList(){\n\t\t\tlet arr = []\n\t\t\tthis.list.forEach((item)=>{\n\t\t\t\tif (item.type === 'emoticon' || item.type === 'image') {\n\t\t\t\t\tarr.push(item.data)\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn arr\n\t\t}\n\t},\n\twatch: {\n\t\tmode(newValue, oldValue) {\n\t\t\tif (newValue !== 'action' && newValue !== 'emoticon') {\n\t\t\t\tthis.$refs.action.hide()\n\t\t\t}\n\t\t\tif (newValue !== 'text') {\n\t\t\t\tuni.hideKeyboard()\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\t// 初始化\n\t\tthis.__init()\n\t},\n\tmethods: {\n\t\t...mapMutations(['regSendVoiceEvent']),\n\t\t__init(){\n\t\t\tvar total = 20\n\t\t\tvar page = Math.ceil(total/8)\n\t\t\tvar arr = []\n\t\t\tfor (var i = 0; i < page; i++) {\n\t\t\t\tvar start = i*8\n\t\t\t\tarr[i] = []\n\t\t\t\tfor (var j = 0; j < 8; j++) {\n\t\t\t\t\tvar no = start + j\n\t\t\t\t\tif ((no+1) > total) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tarr[i].push({\n\t\t\t\t\t\tname:\"表情\"+no,\n\t\t\t\t\t\ticon:\"/static/images/emoticon/5497/\"+no+'.gif',\n\t\t\t\t\t\tevent:\"sendEmoticon\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.emoticonList = arr\n\t\t},\n\t\t//图片缓存\n\t\timage_cache(image_url,media_id) {\t\n\t\t\tvar url;\n\t\t\tuni.getStorage({\n\t\t\t\tkey: media_id,\n\t\t\t\tsuccess:function(res){\n\t\t\t\t\turl = res.data.tempFilePath;\t\n\t\t\t\t},\n\t\t\t\tfail:function(res){\n\t\t\t\t\t// 本地没有缓存 需要下载 \n\t\t\t\t\tuni.downloadFile({\n\t\t\t\t\t\turl: image_url,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.statusCode === 200) {\t\n\t\t\t\t\t\t\t\turl = res.tempFilePath;\n\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\tkey:media_id,\n\t\t\t\t\t\t\t\t\tdata:res,\n\t\t\t\t\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}); \n\t\t\t\t}\n\t\t\t})\n\t\t\treturn url;\n\t\t},\n\t\tsetPic(media_id,index){\n\t\t\tJIM.getResource({'media_id' :media_id}).onSuccess(function(data){\n\t\t\t\t_this.$data.list[index].msg_body.media_id=data.url;\n\t\t\t\tuni.setStorageSync(_this.username,_this.$data.list);\n\t\t\t}).onFail(function(data){\n\t\t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\treject(data);\n\t\t\t});\t\t\n\t\t},\n\t\t// 打开扩展菜单或者表情包\n\t\topenActionOrEmoticon(mode = 'action'){\n\t\t\tthis.mode = mode\n\t\t\tthis.$refs.action.show()\n\t\t\t\n\t\t\tuni.hideKeyboard()\n\t\t\tthis.KeyboardHeight = uni.upx2px(580)\n\t\t\tconsole.log(this.KeyboardHeight)\n\t\t},\n\t\t// 发送\n\t\tsend(type, data = '',options = {}){\n\t\t\tvar _that = this;\n\t\t\tvar text = this.text\n\t\t\tvar latest_msg;\n\t\t\tconsole.log(type+\"=====\"+data)\n\t\t\tswitch (type){\n\t\t\t\tcase 'text':\n\t\t\t\tlatest_msg = text;\n\t\t\t\tJIM.sendSingleMsg({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'content' : text,\n\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t'isremove':false\n\t\t\t\t\t},\n\t\t\t\t}).onSuccess(function(data) {\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": type,\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":data.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"extras\": {'isremove':false},\n\t\t\t\t\t\t\t\"text\": text\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\t\n\t\t\t\t\t// 发送文字成功，清空输入框\n\t\t\t\t\tif (type === 'text') {\n\t\t\t\t\t\t_that.text = ''\n\t\t\t\t\t}\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t//data.code 返回码\n\t\t\t\t\t//data.message 描述\n\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 'image':\n\t\t\t\tuni.showLoading({\n\t\t\t\t\t\"title\":\"图片资源较大，发送中请稍候...\"\n\t\t\t\t})\n\t\t\t\tlatest_msg = \"[图片]\";\n\t\t\t\tJIM.sendSinglePic({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'image' : data, //设置图片参数\n\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t},\n\t\t\t\t}).onSuccess(function(res,msg) {\n\t\t\t\t\tconsole.log(JSON.stringify(msg)+\"===================\")\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": type,\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":res.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"media_id\": msg.content.msg_body.media_id\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t//TODO\n\t\t\t\t});\n\t\t\t\t\tbreak;\t\t\n\t\t\t\t\t\t\t\n\t\t\t\tcase 'audio':\n\t\t\t\tif(options.time<=2){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"说话时间太短啦\",\n\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlatest_msg = \"[语音]\";\n\t\t\t\tJIM.sendSingleFile({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'file' : data ,//设置图片参数\n\t\t\t\t\t'extras':{\n\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t'time':options.time,\n\t\t\t\t\t\t'isAudio':true\n\t\t\t\t\t}\n\t\t\t\t}).onSuccess(function(res,msg) {\n\t\t\t\t\tconsole.log(JSON.stringify(msg)+\"===================\")\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": \"file\",\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":res.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\t\t\n\t\t\t\t\t\t\t\"media_id\":msg.content.msg_body.media_id\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t\t'time':options.time,\n\t\t\t\t\t\t\t'isAudio':true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\t\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t//TODO\n\t\t\t\t});\n\t\t\t\t\tbreak;\t\n\t\t\t\t\t\n\t\t\t\tcase 'emoticon':\n\t\t\t\tlatest_msg = \"[表情]\";\n\t\t\t\tJIM.sendSingleMsg({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'content' : '[表情]',\n\t\t\t\t\t'extras' :{\n\t\t\t\t\t\t\"emotion\":data,\n\t\t\t\t\t\t\"isEmotion\":true,\n\t\t\t\t\t\t\"isremove\":false\n\t\t\t\t\t}\n\t\t\t\t}).onSuccess(function(res) {\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": \"text\",\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"text\":\"[表情]\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'extras' :{\n\t\t\t\t\t\t\t\"emotion\":data,\n\t\t\t\t\t\t\t\"isEmotion\":true,\n\t\t\t\t\t\t\t\"isremove\":false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\t\t\n\t\t\t\t\t\n\t\t\t\t\t_this.list.push(obj)\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t//data.code 返回码\n\t\t\t\t\t//data.message 描述\n\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\tcase 'video':\n\t\t\t\tuni.showLoading({\n\t\t\t\t\t\"title\":\"视频资源较大，发送中请稍候...\"\n\t\t\t\t})\n\t\t\t\tlatest_msg = \"[短视频]\";\n\t\t\t\t\n\t\t\t\tJIM.sendSingleVedio({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'file' : data ,//设置图片参数\n\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t\"video\": \"mp4\",\n\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t\"isVideo\":true\n\t\t\t\t\t},\n\t\t\t\t}).onSuccess(function(res,msg) {\n\t\t\t\t\tconsole.log(JSON.stringify(msg)+\"===================\")\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": msg.content.create_time,\t\t\n\t\t\t\t\t\t\"msg_type\": \"file\",\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":res.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"media_id\":msg.content.msg_body.media_id\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\t\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t//TODO\n\t\t\t\t});\n\t\t\t\t\tbreak;\t\n\t\t\t}\n   \t\t   \n\t\t},\n\t\t// 回到底部\n\t\tpageToBottom(){\n\t\t\t_this=this;\n\n\n\n\n\n\n\n\n\n\n\t\t},\n\t\t// 长按消息气泡\n\t\tlong({x,y,index}){\n\t\t\t// 初始化 索引\n\t\t\tthis.propIndex = index\n\t\t\t// 显示扩展菜单\n\t\t\tthis.$refs.extend.show(x,y)\n\t\t},\n\t\t// 操作菜单方法分发\n\t\tclickEvent(event){\n\t\t\tswitch (event){\n\t\t\t\tcase 'removeChatItem': // 撤回消息\n\t\t\t\t// 拿到当前被操作的信息\n\t\t\t\tif (this.propIndex > -1) {\n\t\t\t\t\tthis.list[this.propIndex].msg_body.extras.isremove = true\n\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// 关闭菜单\n\t\t\tthis.$refs.extend.hide()\n\t\t},\n\t\t// 扩展菜单\n\t\tactionEvent(e){\n\t\t\tswitch (e.event){\n\t\t\t\tcase 'uploadImage': // 选择相册\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tcount:9,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t// 发送到服务器\n\t\t\t\t\t\t// 渲染到页面\n\t\t\t\t\t\tres.tempFilePaths.forEach((item)=>{\n\t\t\t\t\t\t\tthis.send('image',item)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'uploadVideo': // 发送短视频\n\t\t\t\tuni.chooseVideo({\n\t\t\t\t\tmaxDuration:1,\n\t\t\t\t\tsuccess:(res)=>{\n\t\t\t\t\t\tif(res.duration>11){\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\"title\":\"请选择10s以内的短视频！\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.send('video',res.tempFilePath)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 渲染页面\n\t\t\t\t\t\t// 发送到服务端（获取视频封面，返回url）\n\t\t\t\t\t\t// 修改本地的发送状态\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sendEmoticon': // 发送表情包\n\t\t\t\tthis.send('emoticon',e.icon)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t// 点击页面\n\t\tclickPage(){\n\t\t\tthis.mode = ''\n\t\t},\n\t\t// 预览图片\n\t\tpreviewImage(url){\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent:url,\n\t\t\t\turls:[url],\n\t\t\t\tindicator:\"default\"\n\t\t\t})\n\t\t},\n\t\t// 切换音频录制和文本输入\n\t\tchangeVoiceOrText(){\n\t\t\tthis.mode = this.mode !== 'audio' ? 'audio' : 'text'\n\t\t},\n\t\t// 录音相关\n\t\t// 录音开始\n\t\tvoiceTouchStart(e){ \n\t\t\t// 初始化\n\t\t\tthis.isRecording = true\n\t\t\tthis.RecordingStartY = e.changedTouches[0].screenY\n\t\t\tthis.unRecord = false\n\t\t\t// 开始录音\n\t\t\tthis.RECORD.start({\n\t\t\t\tformat:\"mp3\"\n\t\t\t})\n\t\t},\n\t\t// 录音结束\n\t\tvoiceTouchEnd(){\n\t\t\tthis.isRecording = false\n\t\t\t// 停止录音\n\t\t\tthis.RECORD.stop()\n\t\t},\n\t\t// 录音被打断\n\t\tvoiceTouchCancel(){\n\t\t\tthis.isRecording = false\n\t\t\tthis.unRecord = true\n\t\t\t// 停止录音\n\t\t\tthis.RECORD.stop()\n\t\t},\n\t\tvoiceTouchMove(e){\n\t\t\tlet Y = Math.abs(e.changedTouches[0].screenY - this.RecordingStartY)\n\t\t\tthis.unRecord = (Y >= 50)\n\t\t},\n\t\t// 打开聊天信息设置\n\t\topenChatSet(){\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../chat-set/chat-set',\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}