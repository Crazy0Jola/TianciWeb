{"version":3,"sources":["webpack:///E:/天赐/TianciWeb/main.js","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?8b87","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?b44f","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?15ac","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?d57b","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?5cbf","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?500a"],"names":["createPage","Page","_this","JIM","getApp","globalData","components","freeNavBar","freeIconButton","freeChatItem","freePopup","freeMainButton","data","mode","username","nickname","avator","myUsername","myAvator","actionList","name","icon","event","emoticonList","KeyboardHeight","menus","navBarHeight","list","propIndex","text","isRecording","RecordingStartY","unRecord","onLoad","e","uni","getStorageSync","onShow","msg","JSON","parse","pageToBottomTimer","setTimeout","pageToBottom","clearTimeout","showLoading","request","url","header","success","res","console","log","messages","resetUnreadCount","hideLoading","setStorageSync","stringify","mounted","statusBarHeight","upx2px","onKeyboardHeightChange","height","regSendVoiceEvent","send","time","RecordTime","computed","RECORD","state","audio","maskBottom","getMenusHeight","H","length","getMenusStyle","isdoSelf","id","user_id","menusList","filter","v","chatBodyBottom","emoticonOrActionList","imageList","arr","forEach","item","type","push","watch","newValue","oldValue","$refs","action","hide","hideKeyboard","created","__init","methods","total","page","Math","ceil","i","start","j","no","openActionOrEmoticon","show","options","_that","sendSingleMsg","onSuccess","obj","Date","getTime","msg_id","isremove","onFail","long","x","y","index","extend","clickEvent","msg_body","extras","actionEvent","chooseImage","count","tempFilePaths","chooseVideo","maxDuration","tempFilePath","clickPage","previewImage","current","urls","indicator","changeVoiceOrText","voiceTouchStart","changedTouches","screenY","format","voiceTouchEnd","stop","voiceTouchCancel","voiceTouchMove","Y","abs","openChatSet","navigateTo"],"mappings":"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","file":"pages/chat/chat/chat.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/chat/chat/chat.nvue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./chat.nvue?vue&type=template&id=5b9d412e&\"\nimport script from \"./chat.nvue?vue&type=script&lang=js&\"\nexport * from \"./chat.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.nvue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('5b9d412e', component.options)\n    } else {\n      api.reload('5b9d412e', component.options)\n    }\n    module.hot.accept(\"./chat.nvue?vue&type=template&id=5b9d412e&\", function () {\n      api.rerender('5b9d412e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"天赐/TianciWeb/pages/chat/chat/chat.nvue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=template&id=5b9d412e&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.mode = \"text\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.KeyboardHeight = 0\n    }\n  }\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\nimport freeNavBar from \"@/components/free-ui/free-nav-bar.vue\"\nimport freeIconButton from \"@/components/free-ui/free-icon-button.vue\"\nimport freeChatItem from '@/components/free-ui/free-chat-item.vue';\nimport freePopup from \"@/components/free-ui/free-popup.vue\"\nimport freeMainButton from '@/components/free-ui/free-main-button.vue';\n\n\nimport { mapState,mapMutations } from 'vuex'\n\nvar _this;\nvar JIM = getApp().globalData.JIM;\n\nexport default {\n\tcomponents: {\n\t\tfreeNavBar,\n\t\tfreeIconButton,\n\t\tfreeChatItem,\n\t\tfreePopup,\n\t\tfreeMainButton\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 模式 text输入文字，emoticon表情，action操作，audio音频\n\t\t\tmode:\"text\",\n\t\t\tusername:\"\",\n\t\t\tnickname:\"\",\n\t\t\tavator:\"/static/images/userpic.png\",\n\t\t\tmyUsername:\"\",\n\t\t\tmyAvator:\"/static/images/userpic.png\",\n\t\t\t// 扩展菜单列表\n\t\t\tactionList:[\n\t\t\t\t[{\n\t\t\t\t\tname:\"相册\",\n\t\t\t\t\ticon:\"/static/images/extends/pic.png\",\n\t\t\t\t\tevent:\"uploadImage\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"拍摄\",\n\t\t\t\t\ticon:\"/static/images/extends/video.png\",\n\t\t\t\t\tevent:\"uploadVideo\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"收藏\",\n\t\t\t\t\ticon:\"/static/images/extends/shoucan.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"名片\",\n\t\t\t\t\ticon:\"/static/images/extends/man.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"语音通话\",\n\t\t\t\t\ticon:\"/static/images/extends/phone.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"位置\",\n\t\t\t\t\ticon:\"/static/images/extends/path.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t}]\n\t\t\t],\n\t\t\temoticonList:[],\n\t\t\t// 键盘高度\n\t\t\tKeyboardHeight:0,\n\t\t\tmenus:[{ \n\t\t\t\tname:\"复制\",\n\t\t\t\tevent:'',\n\t\t\t},{ \n\t\t\t\tname:\"发送给朋友\",\n\t\t\t\tevent:''\n\t\t\t},{ \n\t\t\t\tname:\"收藏\",\n\t\t\t\tevent:''\n\t\t\t},{ \n\t\t\t\tname:\"删除\",\n\t\t\t\tevent:''\n\t\t\t},{ \n\t\t\t\tname:\"多选\",\n\t\t\t\tevent:''\n\t\t\t},{ \n\t\t\t\tname:\"撤回\",\n\t\t\t\tevent:'removeChatItem'\n\t\t\t}],\n\t\t\tnavBarHeight:0,\n\t\t\tlist:[],\n\t\t\t\t// {\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:1,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"text\",// image,audio,video\n\t\t\t// \tdata:\"你好你好你好你好你好你好你好你好你好你好你好你好你好你好\",\n\t\t\t// \tcreate_time:1569331227,\n\t\t\t// \tisremove:false\n\t\t\t// },{\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:2,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"text\",// image,audio,video\n\t\t\t// \tdata:\"123456你好你好你好你好\",\n\t\t\t// \tcreate_time:1569331267,\n\t\t\t// \tisremove:false\n\t\t\t// },{\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:1,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"text\",// image,audio,video\n\t\t\t// \tdata:\"你好你好你好你好你好你好你好你好你好你好你好你好你好你好\",\n\t\t\t// \tcreate_time:1569331287,\n\t\t\t// \tisremove:false\n\t\t\t// },{\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:2,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"text\",// image,audio,video\n\t\t\t// \tdata:\"123456你好你好你好你好\",\n\t\t\t// \tcreate_time:1569331327,\n\t\t\t// \tisremove:false\n\t\t\t// },{\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:1,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"audio\",// image,audio,video\n\t\t\t// \tdata:\"/static/audio/1.mp3\",\n\t\t\t// \toptions:{\n\t\t\t// \t\ttime:60\n\t\t\t// \t},\n\t\t\t// \tcreate_time:1569331327,\n\t\t\t// \tisremove:false\n\t\t\t// },{\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:1,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"audio\",// image,audio,video\n\t\t\t// \tdata:\"/static/audio/2.mp3\",\n\t\t\t// \toptions:{\n\t\t\t// \t\ttime:20\n\t\t\t// \t},\n\t\t\t// \tcreate_time:1569331327,\n\t\t\t// \tisremove:false\n\t\t\t// },{\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:2,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"audio\",// image,audio,video\n\t\t\t// \tdata:\"/static/audio/3.mp3\",\n\t\t\t// \toptions:{\n\t\t\t// \t\ttime:10\n\t\t\t// \t},\n\t\t\t// \tcreate_time:1569331327,\n\t\t\t// \tisremove:false\n\t\t\t// },{\n\t\t\t// \tavatar:\"/static/images/demo/demo6.jpg\",\n\t\t\t// \tuser_id:1,\n\t\t\t// \tnickname:\"昵称\",\n\t\t\t// \ttype:\"video\",// image,audio,video\n\t\t\t// \tdata:\"/static/video/demo.mp4\",\n\t\t\t// \toptions:{\n\t\t\t// \t\tposter:\"/static/video/demo.jpg\"\n\t\t\t// \t},\n\t\t\t// \tcreate_time:1569331327,\n\t\t\t// \tisremove:false\n\t\t\t// }\n\t\t\t// 当前操作的气泡索引\n\t\t\tpropIndex:-1,\n\t\t\t// 输入文字\n\t\t\ttext:\"\",\n\t\t\t\n\t\t\t// 音频录制状态\n\t\t\tisRecording:false,\n\t\t\tRecordingStartY:0,\n\t\t\t// 取消录音\n\t\t\tunRecord:false\n\t\t}\n\t},\n\tonLoad:function(e){\n\t\t_this=this;\n\t\t_this.username = e.username;\n\t\t_this.nickname = e.nickname;\n\t\t_this.myUsername = uni.getStorageSync('setUserData').username;\n\t},\n\tonShow(){\n\t\tvar msg = uni.getStorageSync(_this.username);\n\t\tif(msg){\n\t\t\t_this.list=JSON.parse(msg);\n\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t_this.pageToBottom()\n\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t},200)\n\t\t}else{\n\t\t\tuni.showLoading({\n\t\t\t\t\"title\":\"正在获取聊天记录...\"\n\t\t\t})\n\t\t\tuni.request({\n\t\t\t\turl: 'https://report.im.jpush.cn/v2/users/' + _this.username +\n\t\t\t\t\t'/messages?count=1000&begin_time=2019-12-25%2023:59:59&end_time=2019-12-29%2023:59:59',\n\t\t\t\theader: {\n\t\t\t\t\t\"Authorization\": 'Basic MDk5NzA4NzZmMzNlODg0YTM2MjQzMzVjOmU4ZTg3M2U2MDI0NTMxNWE3MGVkZTRiMg=='\n\t\t\t\t},\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconsole.log(res.data)\n\t\t\t\t\tvar msg = res.data.messages\n\t\t\t\t\t_this.list=msg;\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t    JIM.resetUnreadCount({\n\t\t\t\t\t\t'username' : _this.username\n\t\t\t\t    });\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tuni.setStorageSync(_this.username,JSON.stringify(msg));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t// var phone=[];\n\t\t// phone.push(\"18952158867\");\n\t\t// phone.push(\"18012018031\");\n\t\t// uni.request({\n\t\t// \turl: 'http://117.83.152.39:8081/interconnect/appUser/getUserPhotoByPhone',\n\t\t// \theader: {\n\t\t// \t\t\"token\": '06874c8b7be14969abac9a18935b18b8',\n\t\t// \t\t\"Content-Type\":\"application/json\"\n\t\t// \t},\n\t\t// \tmethod:\"POST\",\n\t\t// \tdata:{\n\t\t// \t\t// phones:JSON.stringify(phone)\n\t\t// \t},\n\t\t// \tsuccess(res) {\n\t\t// \t\tconsole.log(res)\n\t\t// \t}\n\t\t// })\n\t},\n\tmounted() {\n\n\n\n\t\tthis.navBarHeight = statusBarHeight + uni.upx2px(90)\n\t\t\n\t\t// 监听键盘高度变化\n\t\tuni.onKeyboardHeightChange(res => {\n\t\t  if (this.mode !== 'action' && this.mode !== 'emoticon') {\n\t\t  \tthis.KeyboardHeight = res.height \n\t\t  }\n\t\t  if (this.KeyboardHeight > 0) {\n\t\t  \tthis.pageToBottom()\n\t\t  }\n\t\t})\n\t\t\n\t\t\n\t\t// 注册发送音频事件\n\t\tthis.regSendVoiceEvent((url)=>{\n\t\t\tif (!this.unRecord) {\n\t\t\t\tthis.send('audio',url,{\n\t\t\t\t\ttime:this.RecordTime\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tRECORD:state=>state.audio.RECORD,\n\t\t\tRecordTime:state=>state.audio.RecordTime\n\t\t}),\n\t\t// 获取蒙版的位置\n\t\tmaskBottom(){\n\t\t\treturn this.KeyboardHeight + uni.upx2px(105)\n\t\t},\n\t\t// 动态获取菜单高度\n\t\tgetMenusHeight(){\n\t\t\tlet H = 100\n\t\t\treturn this.menus.length * H\n\t\t},\n\t\t// 获取菜单的样式\n\t\tgetMenusStyle(){\n\t\t\treturn `height: ${this.getMenusHeight}rpx;`\n\t\t},\n\t\t// 判断是否操作本人信息\n\t\tisdoSelf(){\n\t\t\t// 获取本人id（假设拿到了）\n\t\t\tlet id = 1\n\t\t\tlet user_id = this.propIndex > -1 ? this.list[this.propIndex].user_id : 0\n\t\t\treturn user_id === id\n\t\t},\n\t\t// 获取操作菜单\n\t\tmenusList(){\n\t\t\treturn this.menus.filter(v=>{\n\t\t\t\tif (v.name === '撤回' && !this.isdoSelf) {\n\t\t\t\t\treturn false\n\t\t\t\t} else {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 聊天区域bottom\n\t\tchatBodyBottom(){\n\t\t\treturn `bottom:${uni.upx2px(105) + this.KeyboardHeight}px;top:${this.navBarHeight}px;`\n\t\t},\n\t\t// 获取操作或者表情列表\n\t\temoticonOrActionList(){\n\t\t\treturn (this.mode === 'emoticon' || this.mode === 'action') ? this[this.mode+'List'] : []\n\t\t},\n\t\t// 所有信息的图片地址\n\t\timageList(){\n\t\t\tlet arr = []\n\t\t\tthis.list.forEach((item)=>{\n\t\t\t\tif (item.type === 'emoticon' || item.type === 'image') {\n\t\t\t\t\tarr.push(item.data)\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn arr\n\t\t}\n\t},\n\twatch: {\n\t\tmode(newValue, oldValue) {\n\t\t\tif (newValue !== 'action' && newValue !== 'emoticon') {\n\t\t\t\tthis.$refs.action.hide()\n\t\t\t}\n\t\t\tif (newValue !== 'text') {\n\t\t\t\tuni.hideKeyboard()\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\t// 初始化\n\t\tthis.__init()\n\t},\n\tmethods: {\n\t\t...mapMutations(['regSendVoiceEvent']),\n\t\t__init(){\n\t\t\tvar total = 20\n\t\t\tvar page = Math.ceil(total/8)\n\t\t\tvar arr = []\n\t\t\tfor (var i = 0; i < page; i++) {\n\t\t\t\tvar start = i*8\n\t\t\t\tarr[i] = []\n\t\t\t\tfor (var j = 0; j < 8; j++) {\n\t\t\t\t\tvar no = start + j\n\t\t\t\t\tif ((no+1) > total) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tarr[i].push({\n\t\t\t\t\t\tname:\"表情\"+no,\n\t\t\t\t\t\ticon:\"/static/images/emoticon/5497/\"+no+'.gif',\n\t\t\t\t\t\tevent:\"sendEmoticon\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.emoticonList = arr\n\t\t},\n\t\t// 打开扩展菜单或者表情包\n\t\topenActionOrEmoticon(mode = 'action'){\n\t\t\tthis.mode = mode\n\t\t\tthis.$refs.action.show()\n\t\t\t\n\t\t\tuni.hideKeyboard()\n\t\t\tthis.KeyboardHeight = uni.upx2px(580)\n\t\t},\n\t\t// 发送\n\t\tsend(type, data = '',options = {}){\n\t\t\tvar _that = this;\n\t\t\tvar text = this.text\n\t\t\tswitch (type){\n\t\t\t\tcase 'text':\n\t\t\t\tJIM.sendSingleMsg({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'content' : text,\n\t\t\t\t\t'extras' : {\n\t\t\t\t\t\t\"isremove\":false\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}).onSuccess(function(data) {\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": type,\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":data.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"extras\": {isremove:false},\n\t\t\t\t\t\t\t\"text\": text\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\t\n\t\t\t\t\t// 发送文字成功，清空输入框\n\t\t\t\t\tif (type === 'text') {\n\t\t\t\t\t\t_that.text = ''\n\t\t\t\t\t}\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,JSON.stringify(_this.list));\n\t\t\t\t\t//data.code 返回码\n\t\t\t\t\t//data.message 描述\n\t\t\t\t\t//data.msg_id 发送成功后的消息 id\n\t\t\t\t\t//data.ctime_ms 消息生成时间,毫秒\n\t\t\t\t\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t//data.code 返回码\n\t\t\t\t\t//data.message 描述\n\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n   \t\t   \n\t\t},\n\t\t// 回到底部\n\t\tpageToBottom(){\n\n\n\n\n\n\n\n\t\t},\n\t\t// 长按消息气泡\n\t\tlong({x,y,index}){\n\t\t\t// 初始化 索引\n\t\t\tthis.propIndex = index\n\t\t\t// 显示扩展菜单\n\t\t\tthis.$refs.extend.show(x,y)\n\t\t},\n\t\t// 操作菜单方法分发\n\t\tclickEvent(event){\n\t\t\tswitch (event){\n\t\t\t\tcase 'removeChatItem': // 撤回消息\n\t\t\t\t// 拿到当前被操作的信息\n\t\t\t\tif (this.propIndex > -1) {\n\t\t\t\t\tthis.list[this.propIndex].msg_body.extras.isremove = true\n\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// 关闭菜单\n\t\t\tthis.$refs.extend.hide()\n\t\t},\n\t\t// 扩展菜单\n\t\tactionEvent(e){\n\t\t\tswitch (e.event){\n\t\t\t\tcase 'uploadImage': // 选择相册\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tcount:9,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t// 发送到服务器\n\t\t\t\t\t\t// 渲染到页面\n\t\t\t\t\t\tres.tempFilePaths.forEach((item)=>{\n\t\t\t\t\t\t\tthis.send('image',item)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'uploadVideo': // 发送短视频\n\t\t\t\tuni.chooseVideo({\n\t\t\t\t\tmaxDuration:10,\n\t\t\t\t\tsuccess:(res)=>{\n\t\t\t\t\t\tthis.send('video',res.tempFilePath)\n\t\t\t\t\t\t// 渲染页面\n\t\t\t\t\t\t// 发送到服务端（获取视频封面，返回url）\n\t\t\t\t\t\t// 修改本地的发送状态\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sendEmoticon': // 发送表情包\n\t\t\t\tthis.send('emoticon',e.icon)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t// 点击页面\n\t\tclickPage(){\n\t\t\tthis.mode = ''\n\t\t},\n\t\t// 预览图片\n\t\tpreviewImage(url){\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent:url,\n\t\t\t\turls:[url],\n\t\t\t\tindicator:\"default\"\n\t\t\t})\n\t\t},\n\t\t// 切换音频录制和文本输入\n\t\tchangeVoiceOrText(){\n\t\t\tthis.mode = this.mode !== 'audio' ? 'audio' : 'text'\n\t\t},\n\t\t// 录音相关\n\t\t// 录音开始\n\t\tvoiceTouchStart(e){ \n\t\t\t// 初始化\n\t\t\tthis.isRecording = true\n\t\t\tthis.RecordingStartY = e.changedTouches[0].screenY\n\t\t\tthis.unRecord = false\n\t\t\t// 开始录音\n\t\t\tthis.RECORD.start({\n\t\t\t\tformat:\"mp3\"\n\t\t\t})\n\t\t},\n\t\t// 录音结束\n\t\tvoiceTouchEnd(){\n\t\t\tthis.isRecording = false\n\t\t\t// 停止录音\n\t\t\tthis.RECORD.stop()\n\t\t},\n\t\t// 录音被打断\n\t\tvoiceTouchCancel(){\n\t\t\tthis.isRecording = false\n\t\t\tthis.unRecord = true\n\t\t\t// 停止录音\n\t\t\tthis.RECORD.stop()\n\t\t},\n\t\tvoiceTouchMove(e){\n\t\t\tlet Y = Math.abs(e.changedTouches[0].screenY - this.RecordingStartY)\n\t\t\tthis.unRecord = (Y >= 50)\n\t\t},\n\t\t// 打开聊天信息设置\n\t\topenChatSet(){\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../chat-set/chat-set',\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}