{"version":3,"sources":["webpack:///E:/天赐/TianciWeb/main.js","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?8b87","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?b44f","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?15ac","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?d57b","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?5cbf","webpack:///E:/天赐/TianciWeb/pages/chat/chat/chat.nvue?500a"],"names":["createPage","Page","_this","JIM","getApp","globalData","components","freeNavBar","freeIconButton","freeChatItem","freePopup","freeMainButton","data","mode","tempurl","username","nickname","avator","myUsername","myAvator","actionList","name","icon","event","emoticonList","KeyboardHeight","menus","navBarHeight","list","propIndex","text","isRecording","RecordingStartY","unRecord","onLoad","e","uni","$on","console","log","msg","getStorageSync","pageToBottomTimer","setTimeout","pageToBottom","clearTimeout","onUnload","$off","onShow","resetUnreadCount","now","Date","past","now_year","getFullYear","now_month","getMonth","now_day","getDate","now_hour","getHours","now_minutes","getMinutes","now_seconds","getSeconds","now_date","past_yaer","past_month","past_day","past_hour","past_minutes","past_seconds","past_date","showLoading","request","url","header","success","res","messages","$data","map","elem","index","msg_type","setPic","msg_body","media_id","setStorageSync","hideLoading","mounted","statusBarHeight","upx2px","onKeyboardHeightChange","height","regSendVoiceEvent","send","time","RecordTime","computed","RECORD","state","audio","maskBottom","getMenusHeight","H","length","getMenusStyle","isdoSelf","target_id","menusList","filter","v","chatBodyBottom","emoticonOrActionList","imageList","arr","forEach","item","type","push","watch","newValue","oldValue","$refs","action","hide","hideKeyboard","created","__init","onBackPress","options","JSON","stringify","from","switchTab","methods","total","page","Math","ceil","i","start","j","no","getResource","onSuccess","downloadFile","statusCode","saveFile","tempFilePath","savedFilePath","plus","io","convertLocalFileSystemURL","onFail","showToast","getCodeMsg","code","bottom","openActionOrEmoticon","show","_that","latest_msg","sendSingleMsg","obj","getTime","msg_id","updateConversation","sendSinglePic","title","sendSingleFile","sendSingleVedio","content","create_time","long","x","y","extend","clickEvent","extras","isremove","actionEvent","chooseImage","count","sizeType","tempFilePaths","chooseVideo","maxDuration","duration","clickPage","previewImage","reUrl","convertAbsoluteFileSystem","current","urls","indicator","changeVoiceOrText","voiceTouchStart","changedTouches","screenY","format","voiceTouchEnd","stop","voiceTouchCancel","voiceTouchMove","Y","abs","openChatSet","navigateTo"],"mappings":"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","file":"pages/chat/chat/chat.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/chat/chat/chat.nvue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./chat.nvue?vue&type=template&id=5b9d412e&\"\nimport script from \"./chat.nvue?vue&type=script&lang=js&\"\nexport * from \"./chat.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.nvue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('5b9d412e', component.options)\n    } else {\n      api.reload('5b9d412e', component.options)\n    }\n    module.hot.accept(\"./chat.nvue?vue&type=template&id=5b9d412e&\", function () {\n      api.rerender('5b9d412e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"天赐/TianciWeb/pages/chat/chat/chat.nvue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=template&id=5b9d412e&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.mode = \"text\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.KeyboardHeight = 0\n    }\n  }\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\nimport freeNavBar from \"@/components/free-ui/free-nav-bar.vue\"\nimport freeIconButton from \"@/components/free-ui/free-icon-button.vue\"\nimport freeChatItem from '@/components/free-ui/free-chat-item.vue';\nimport freePopup from \"@/components/free-ui/free-popup.vue\"\nimport freeMainButton from '@/components/free-ui/free-main-button.vue';\n\n\nimport { mapState,mapMutations } from 'vuex'\nvar _this;\nvar JIM = getApp().globalData.JIM;\nexport default {\n\tcomponents: {\n\t\tfreeNavBar,\n\t\tfreeIconButton,\n\t\tfreeChatItem,\n\t\tfreePopup,\n\t\tfreeMainButton\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 模式 text输入文字，emoticon表情，action操作，audio音频\n\t\t\tmode:\"text\",\n\t\t\ttempurl:\"\",\n\t\t\tusername:\"\",\n\t\t\tnickname:\"\",\n\t\t\tavator:\"/static/images/userpic.jpg\",\n\t\t\tmyUsername:\"\",\n\t\t\tmyAvator:\"/static/images/userpic.jpg\",\n\t\t\t// 扩展菜单列表\n\t\t\tactionList:[\n\t\t\t\t[{\n\t\t\t\t\tname:\"相册\",\n\t\t\t\t\ticon:\"/static/images/extends/pic.png\",\n\t\t\t\t\tevent:\"uploadImage\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"拍摄\",\n\t\t\t\t\ticon:\"/static/images/extends/video.png\",\n\t\t\t\t\tevent:\"uploadVideo\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"收藏\",\n\t\t\t\t\ticon:\"/static/images/extends/shoucan.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"名片\",\n\t\t\t\t\ticon:\"/static/images/extends/man.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"语音通话\",\n\t\t\t\t\ticon:\"/static/images/extends/phone.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t},{\n\t\t\t\t\tname:\"位置\",\n\t\t\t\t\ticon:\"/static/images/extends/path.png\",\n\t\t\t\t\tevent:\"\"\n\t\t\t\t}]\n\t\t\t],\n\t\t\temoticonList:[],\n\t\t\t// 键盘高度\n\t\t\tKeyboardHeight:0,\n\t\t\tmenus:[{ \n\t\t\t\tname:\"复制\",\n\t\t\t\tevent:'',\n\t\t\t},{ \n\t\t\t\tname:\"删除\",\n\t\t\t\tevent:''\n\t\t\t},{ \n\t\t\t\tname:\"撤回\",\n\t\t\t\tevent:'removeChatItem'\n\t\t\t}],\n\t\t\tnavBarHeight:0,\n\t\t\tlist:[],\n\t\t\t// 当前操作的气泡索引\n\t\t\tpropIndex:-1,\n\t\t\t// 输入文字\n\t\t\ttext:\"\",\n\t\t\t\n\t\t\t// 音频录制状态\n\t\t\tisRecording:false,\n\t\t\tRecordingStartY:0,\n\t\t\t// 取消录音\n\t\t\tunRecord:false\n\t\t}\n\t},\n\tonLoad:function(e){\n\t\tuni.$on(\"get_chat_msg\",function(){\n\t\t\tconsole.log(\"===================有新消息来啦=====================\")\n\t\t\tvar msg = uni.getStorageSync(_this.username);\n\t\t\t_this.list=msg;\n\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t_this.pageToBottom()\n\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t},200)\n\t\t})\n\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t_this.pageToBottom()\n\t\t\tclearTimeout(pageToBottomTimer)\n\t\t},500)\n\t\t_this=this;\n\t\t_this.username = e.username;\n\t\t_this.nickname = e.nickname;\n\t\t_this.myUsername = uni.getStorageSync('setUserData').username;\n\t},\n\tonUnload(){\n\t\tconsole.log(\"=================onUnload==================\")\n\t\tuni.$off(\"get_chat_msg\")\n\t},\n\tonShow(){\t\t\t\n\t\tconsole.log(\"chat__________________onSHow\")\n\t\t// var imagepath=_this.image_cache(\"https://img.jiguang.cn/im-portal/0.0.1/assets/img/jverify-flow-banner-new.png\",\"a\");\n\t\t// var p = plus.io.convertLocalFileSystemURL(imagepath);  \n\t\t// console.log(p)\n\t\tvar msg = uni.getStorageSync(_this.username);\n\t\tJIM.resetUnreadCount({\n\t\t\t'username' : _this.username\n\t\t});\n\t\tif(msg){\n\t\t\t_this.list=msg;\t\t\n\t\t\t// var pageToBottomTimer = setTimeout(()=>{\n\t\t\t// \t_this.pageToBottom()\n\t\t\t// \tclearTimeout(pageToBottomTimer)\n\t\t\t// },500)\n\t\t}else{\n\t\t\tconsole.log(\"hhhhhhhhhhhh\")\n\t\t\tvar now = new Date()\n\t\t\tvar past = new Date(new Date()-86400000*7)\n\t\t\t\n\t\t\tvar now_year = now.getFullYear();\n\t\t\tvar now_month = now.getMonth()+1;\n\t\t\tvar now_day = now.getDate();\n\t\t\tvar now_hour = now.getHours();\n\t\t\tvar now_minutes = now.getMinutes();\n\t\t\tvar now_seconds = now.getSeconds();\n\t\t\t\n\t\t\tif(now_month<10){\n\t\t\t\tnow_month=\"0\"+now_month;\n\t\t\t}\n\t\t\tif(now_day<10){\n\t\t\t\tnow_day=\"0\"+now_day;\n\t\t\t}\n\t\t\tif(now_hour<10){\n\t\t\t\tnow_hour=\"0\"+now_hour;\n\t\t\t}\n\t\t\tif(now_minutes<10){\n\t\t\t\tnow_minutes=\"0\"+now_minutes;\n\t\t\t}\n\t\t\tif(now_seconds<10){\n\t\t\t\tnow_seconds=\"0\"+now_seconds;\n\t\t\t}\n\t\t\tvar now_date = now_year+\"-\"+now_month+\"-\"+now_day+\"%20\"+now_hour+\":\"+now_minutes+\":\"+now_seconds\n\t\t\t\n\t\t\tvar past_yaer = past.getFullYear();\n\t\t\tvar past_month = past.getMonth()+1;\n\t\t\tvar past_day = past.getDate();\n\t\t\tvar past_hour = past.getHours();\n\t\t\tvar past_minutes = past.getMinutes();\n\t\t\tvar past_seconds = past.getSeconds();\n\t\t\tif(past_month<10){\n\t\t\t\tpast_month=\"0\"+past_month;\n\t\t\t}\n\t\t\tif(past_day<10){\n\t\t\t\tpast_day=\"0\"+past_day;\n\t\t\t}\n\t\t\tif(past_hour<10){\n\t\t\t\tpast_hour=\"0\"+past_hour;\n\t\t\t}\n\t\t\tif(past_minutes<10){\n\t\t\t\tpast_minutes=\"0\"+past_minutes;\n\t\t\t}\n\t\t\tif(past_seconds<10){\n\t\t\t\tpast_seconds=\"0\"+past_seconds;\n\t\t\t}\n\t\t\tvar past_date = past_yaer+\"-\"+past_month+\"-\"+past_day+\"%20\"+past_hour+\":\"+past_minutes+\":\"+past_seconds\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\t\"title\":\"正在获取聊天记录...\"\n\t\t\t})\n\t\t\tuni.request({\n\t\t\t\turl: 'https://report.im.jpush.cn/v2/users/' + _this.username +\n\t\t\t\t\t'/messages?count=1000&begin_time='+past_date+'&end_time='+now_date,\n\t\t\t\theader: {\n\t\t\t\t\t\"Authorization\": 'Basic MDk5NzA4NzZmMzNlODg0YTM2MjQzMzVjOmU4ZTg3M2U2MDI0NTMxNWE3MGVkZTRiMg=='\n\t\t\t\t},\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tvar msg = res.data.messages\n\t\t\t\t\t// msg.forEach(function(item){\n\t\t\t\t\t// \tif(item.msg_type==\"image\"){\n\t\t\t\t\t// \t\tJIM.getResource({'media_id' :item.msg_body.media_id}).onSuccess(function(data){\n\t\t\t\t\t// \t\t\titem.msg_body.media_id = data.url;\n\t\t\t\t\t// \t\t\tconsole.log('success:' + JSON.stringify(data));\n\t\t\t\t\t// \t\t}).onFail(function(data){\n\t\t\t\t\t// \t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t\t// \t\t});\n\t\t\t\t\t// \t}\t\n\t\t\t\t\t// })\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t_this.$data.list=msg;\n\t\t\t\t\n\t\t\t\t\t_this.$data.list.map(function(elem,index){\n\t\t\t\t\t    if(elem.msg_type!=\"text\"){\n\t\t\t\t\t    \t_this.setPic(elem.msg_body.media_id,index);\n\t\t\t\t\t    }\n\t\t\t\t\t})\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.$data.list);\n\t\t\t\t\t_this.pageToBottom();\n\t\t\t\t\tuni.hideLoading()\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t// var phone=[];\n\t\t// phone.push(\"18952158867\");\n\t\t// phone.push(\"18012018031\");\n\t\t// uni.request({\n\t\t// \turl: 'http://117.83.152.39:8081/interconnect/appUser/getUserPhotoByPhone',\n\t\t// \theader: {\n\t\t// \t\t\"token\": '06874c8b7be14969abac9a18935b18b8',\n\t\t// \t\t\"Content-Type\":\"application/json\"\n\t\t// \t},\n\t\t// \tmethod:\"POST\",\n\t\t// \tdata:{\n\t\t// \t\t// phones:JSON.stringify(phone)\n\t\t// \t},\n\t\t// \tsuccess(res) {\n\t\t// \t\tconsole.log(res)\n\t\t// \t}\n\t\t// })\n\t},\n\tmounted() {\n\n\n\n\t\tthis.navBarHeight = statusBarHeight + uni.upx2px(90)\n\t\t\n\t\t// 监听键盘高度变化\n\t\tuni.onKeyboardHeightChange(res => {\n\t\t  if (this.mode !== 'action' && this.mode !== 'emoticon') {\n\t\t  \tthis.KeyboardHeight = res.height \n\t\t  }\n\t\t  if (this.KeyboardHeight > 0) {\n\t\t  \tthis.pageToBottom()\n\t\t  }\n\t\t})\n\t\t\n\t\t\n\t\t// 注册发送音频事件\n\t\tthis.regSendVoiceEvent((url)=>{\n\t\t\tif (!this.unRecord) {\n\t\t\t\tthis.send('audio',url,{\n\t\t\t\t\ttime:this.RecordTime\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tRECORD:state=>state.audio.RECORD,\n\t\t\tRecordTime:state=>state.audio.RecordTime\n\t\t}),\n\t\t// 获取蒙版的位置\n\t\tmaskBottom(){\n\t\t\treturn this.KeyboardHeight + uni.upx2px(105)\n\t\t},\n\t\t// 动态获取菜单高度\n\t\tgetMenusHeight(){\n\t\t\tlet H = 100\n\t\t\treturn this.menus.length * H\n\t\t},\n\t\t// 获取菜单的样式\n\t\tgetMenusStyle(){\n\t\t\treturn `height: ${this.getMenusHeight}rpx;`\n\t\t},\n\t\t// 判断是否操作本人信息\n\t\tisdoSelf(){\n\t\t\tlet target_id = _this.propIndex > -1 ? _this.list[_this.propIndex].target_id : 0\n\t\t\treturn target_id !== _this.myUsername\n\t\t},\n\t\t// 获取操作菜单\n\t\tmenusList(){\n\t\t\treturn this.menus.filter(v=>{\n\t\t\t\tif (v.name === '撤回' && !this.isdoSelf) {\n\t\t\t\t\treturn false\n\t\t\t\t} else {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 聊天区域bottom\n\t\tchatBodyBottom(){\n\t\t\treturn `bottom:${uni.upx2px(105) + this.KeyboardHeight}px;top:${this.navBarHeight}px;`\n\t\t},\n\t\t// 获取操作或者表情列表\n\t\temoticonOrActionList(){\n\t\t\treturn (this.mode === 'emoticon' || this.mode === 'action') ? this[this.mode+'List'] : []\n\t\t},\n\t\t// 所有信息的图片地址\n\t\timageList(){\n\t\t\tlet arr = []\n\t\t\tthis.list.forEach((item)=>{\n\t\t\t\tif (item.type === 'emoticon' || item.type === 'image') {\n\t\t\t\t\tarr.push(item.data)\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn arr\n\t\t}\n\t},\n\twatch: {\n\t\tmode(newValue, oldValue) {\n\t\t\tif (newValue !== 'action' && newValue !== 'emoticon') {\n\t\t\t\tthis.$refs.action.hide()\n\t\t\t}\n\t\t\tif (newValue !== 'text') {\n\t\t\t\tuni.hideKeyboard()\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\t// 初始化\n\t\tthis.__init()\n\t},\n\tonBackPress(options){\n\t\tconsole.log(options)\n\t\tconsole.log(JSON.stringify(options))\n\t\tif(options.from==='backbutton'||options.from==='navigateBack'){\n\t\t\tconsole.log(\"hhhh\")\n\t\t\tuni.switchTab({\n\t\t\t\turl:\"../../tabbar/index/index\"\n\t\t\t})\n\t\t\treturn true;\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations(['regSendVoiceEvent']),\n\t\t__init(){\n\t\t\tvar total = 20\n\t\t\tvar page = Math.ceil(total/8)\n\t\t\tvar arr = []\n\t\t\tfor (var i = 0; i < page; i++) {\n\t\t\t\tvar start = i*8\n\t\t\t\tarr[i] = []\n\t\t\t\tfor (var j = 0; j < 8; j++) {\n\t\t\t\t\tvar no = start + j\n\t\t\t\t\tif ((no+1) > total) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tarr[i].push({\n\t\t\t\t\t\tname:\"表情\"+no,\n\t\t\t\t\t\ticon:\"/static/images/emoticon/5497/\"+no+'.gif',\n\t\t\t\t\t\tevent:\"sendEmoticon\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.emoticonList = arr\n\t\t},\n\t\tsetPic(media_id,index){\n\t\t\tJIM.getResource({'media_id' :media_id}).onSuccess(function(data){\n\t\t\t\tuni.downloadFile({\n\t\t\t\t\turl: data.url,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\t\n\t\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\t\ttempFilePath: res.tempFilePath,\n\t\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\t\tvar savedFilePath = plus.io.convertLocalFileSystemURL(res.savedFilePath);\n\t\t\t\t\t\t\t\t\t_this.$data.list[index].msg_body.media_id=savedFilePath;\n\t\t\t\t\t\t\t\t\tuni.setStorageSync(_this.username,_this.$data.list);\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}); \n\t\t\t}).onFail(function(data){\n\t\t\t\tuni.showToast({\n\t\t\t\t\t\"title\":getCodeMsg(data.code),\n\t\t\t\t\t\"position\":bottom\n\t\t\t\t})\n\t\t\t});\t\t\n\t\t},\n\t\t// 打开扩展菜单或者表情包\n\t\topenActionOrEmoticon(mode = 'action'){\n\t\t\tthis.mode = mode\n\t\t\tthis.$refs.action.show()\n\t\t\t\n\t\t\tuni.hideKeyboard()\n\t\t\tthis.KeyboardHeight = uni.upx2px(580)\n\t\t},\n\t\t// 发送\n\t\tsend(type, data = '',options = {}){\n\t\t\tvar _that = this;\n\t\t\tvar text = this.text\n\t\t\tvar latest_msg;\n\t\t\tif(type==\"image\"||type==\"audio\"||type==\"video\"){\n\t\t\t\tuni.saveFile({\n\t\t\t\t\ttempFilePath: data,\n\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\tdata = plus.io.convertLocalFileSystemURL(res.savedFilePath);\n\t\t\t\t\t\tconsole.log(data)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tconsole.log(type+\"=====\"+data)\n\t\t\tswitch (type){\n\t\t\t\tcase 'text':\n\t\t\t\tlatest_msg = text;\n\t\t\t\tJIM.sendSingleMsg({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'content' : text,\n\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t'isremove':false\n\t\t\t\t\t},\n\t\t\t\t}).onSuccess(function(data) {\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": type,\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":data.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"extras\": {'isremove':false},\n\t\t\t\t\t\t\t\"text\": text\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\t\n\t\t\t\t\t// 发送文字成功，清空输入框\n\t\t\t\t\tif (type === 'text') {\n\t\t\t\t\t\t_that.text = ''\n\t\t\t\t\t}\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\"title\":getCodeMsg(data.code),\n\t\t\t\t\t\t\"position\":bottom\n\t\t\t\t\t})\n\t\t\t\t\t//data.code 返回码\n\t\t\t\t\t//data.message 描述\n\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 'image':\n\t\t\t\tuni.showLoading({\n\t\t\t\t\t\"title\":\"图片资源较大，发送中请稍候...\"\n\t\t\t\t})\n\t\t\t\tlatest_msg = \"[图片]\";\n\t\t\t\tJIM.sendSinglePic({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'image' : data, //设置图片参数\n\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t},\n\t\t\t\t}).onSuccess(function(res,msg) {\n\t\t\t\t\tconsole.log(JSON.stringify(msg)+\"===================\")\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": type,\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":res.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"media_id\": data,\n\t\t\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\"title\":getCodeMsg(data.code),\n\t\t\t\t\t\t\"position\":bottom\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\tbreak;\t\t\n\t\t\t\t\t\t\t\n\t\t\t\tcase 'audio':\n\t\t\t\tif(options.time<=2){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"说话时间太短啦\",\n\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlatest_msg = \"[语音]\";\n\t\t\t\tJIM.sendSingleFile({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'file' : data ,//设置图片参数\n\t\t\t\t\t'extras':{\n\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t'time':options.time,\n\t\t\t\t\t\t'isAudio':true\n\t\t\t\t\t}\n\t\t\t\t}).onSuccess(function(res,msg) {\n\t\t\t\t\tconsole.log(JSON.stringify(msg)+\"===================\")\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": \"file\",\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":res.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\t\t\n\t\t\t\t\t\t\t\"media_id\":data,\n\t\t\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t\t\t'time':options.time,\n\t\t\t\t\t\t\t\t'isAudio':true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\t\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\"title\":getCodeMsg(data.code),\n\t\t\t\t\t\t\"position\":bottom\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\tbreak;\t\n\t\t\t\t\t\n\t\t\t\tcase 'emoticon':\n\t\t\t\tlatest_msg = \"[表情]\";\n\t\t\t\tJIM.sendSingleMsg({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'content' : '[表情]',\n\t\t\t\t\t'extras' :{\n\t\t\t\t\t\t\"emotion\":data,\n\t\t\t\t\t\t\"isEmotion\":true,\n\t\t\t\t\t\t\"isremove\":false\n\t\t\t\t\t}\n\t\t\t\t}).onSuccess(function(res) {\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": (new Date()).getTime(),\t\t\t\t\n\t\t\t\t\t\t\"msg_type\": \"text\",\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"text\":\"[表情]\",\n\t\t\t\t\t\t\t'extras' :{\n\t\t\t\t\t\t\t\t\"emotion\":data,\n\t\t\t\t\t\t\t\t\"isEmotion\":true,\n\t\t\t\t\t\t\t\t\"isremove\":false\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\t\t\n\t\t\t\t\t\n\t\t\t\t\t_this.list.push(obj)\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\"title\":getCodeMsg(data.code),\n\t\t\t\t\t\t\"position\":bottom\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\tcase 'video':\n\t\t\t\tuni.showLoading({\n\t\t\t\t\t\"title\":\"视频资源较大，发送中请稍候...\"\n\t\t\t\t})\n\t\t\t\tlatest_msg = \"[短视频]\";\n\t\t\t\t\n\t\t\t\tJIM.sendSingleVedio({\n\t\t\t\t\t'target_username' : _this.username,\n\t\t\t\t\t'file' : data ,//设置图片参数\n\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t\"video\": \"mp4\",\n\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t\"isVideo\":true\n\t\t\t\t\t},\n\t\t\t\t}).onSuccess(function(res,msg) {\n\t\t\t\t\tconsole.log(JSON.stringify(msg)+\"===================\")\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\"from_id\": _this.myUsername,\n\t\t\t\t\t\t\"create_time\": msg.content.create_time,\t\t\n\t\t\t\t\t\t\"msg_type\": \"file\",\n\t\t\t\t\t\t\"target_id\": _this.username,\n\t\t\t\t\t\t\"msg_id\":res.msg_id,\n\t\t\t\t\t\t\"msg_body\":{\n\t\t\t\t\t\t\t\"media_id\":data,\n\t\t\t\t\t\t\t\"extras\": {\n\t\t\t\t\t\t\t\t\"video\": \"mp4\",\n\t\t\t\t\t\t\t\t'isremove':false,\n\t\t\t\t\t\t\t\t\"isVideo\":true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"my\":true,\n\t\t\t\t\t\t\"data\":data,\n\t\t\t\t\t}\n\t\t\t\t\t_this.list.push(obj)\n\t\t\t\t\t\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\n\t\t\t\t\t// 置于底部\n\t\t\t\t\tvar pageToBottomTimer = setTimeout(()=>{\n\t\t\t\t\t\t_this.pageToBottom()\n\t\t\t\t\t\tclearTimeout(pageToBottomTimer)\n\t\t\t\t\t},200)\n\t\t\t\t\t\n\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t   'username' : _this.username,\n\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.setStorageSync(_this.username,_this.list);\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\"title\":getCodeMsg(data.code),\n\t\t\t\t\t\t\"position\":\"bottom\"\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\tbreak;\t\n\t\t\t}\n   \t\t   \n\t\t},\n\t\t// 回到底部\n\t\tpageToBottom(){\n\t\t\t_this=this;\n\n\n\n\n\n\n\n\n\n\n\t\t},\n\t\t// 长按消息气泡\n\t\tlong({x,y,index}){\n\t\t\t// 初始化 索引\n\t\t\tthis.propIndex = index\n\t\t\t// 显示扩展菜单\n\t\t\tthis.$refs.extend.show(x,y)\n\t\t},\n\t\t// 操作菜单方法分发\n\t\tclickEvent(event){\n\t\t\tswitch (event){\n\t\t\t\tcase 'removeChatItem': // 撤回消息\n\t\t\t\t// 拿到当前被操作的信息\n\t\t\t\tif (this.propIndex > -1) {\n\t\t\t\t\tthis.list[this.propIndex].msg_body.extras.isremove = true\n\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// 关闭菜单\n\t\t\tthis.$refs.extend.hide()\n\t\t},\n\t\t// 扩展菜单\n\t\tactionEvent(e){\n\t\t\tswitch (e.event){\n\t\t\t\tcase 'uploadImage': // 选择相册\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tcount:9,\n\t\t\t\t\tsizeType:['compressed'],\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t// 发送到服务器\n\t\t\t\t\t\t// 渲染到页面\n\t\t\t\t\t\tres.tempFilePaths.forEach((item)=>{\n\t\t\t\t\t\t\tthis.send('image',item)\t\t\t\t\t\t\t\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'uploadVideo': // 发送短视频\n\t\t\t\tuni.chooseVideo({\n\t\t\t\t\tmaxDuration:10,\n\t\t\t\t\tsuccess:(res)=>{\n\t\t\t\t\t\tif(res.duration>11){\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\"title\":\"请选择10s以内的短视频！\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tthis.send('video',res.tempFilePath)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 渲染页面\n\t\t\t\t\t\t// 发送到服务端（获取视频封面，返回url）\n\t\t\t\t\t\t// 修改本地的发送状态\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sendEmoticon': // 发送表情包\n\t\t\t\tthis.send('emoticon',e.icon)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t// 点击页面\n\t\tclickPage(){\n\t\t\tthis.mode = ''\n\t\t},\n\t\t// 预览图片\n\t\tpreviewImage(url){\n\t\t\tvar reUrl = plus.io.convertAbsoluteFileSystem(url);\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent:reUrl,\n\t\t\t\turls:[reUrl],\n\t\t\t\tindicator:\"default\"\n\t\t\t})\n\t\t},\n\t\t// 切换音频录制和文本输入\n\t\tchangeVoiceOrText(){\n\t\t\tthis.mode = this.mode !== 'audio' ? 'audio' : 'text'\n\t\t},\n\t\t// 录音相关\n\t\t// 录音开始\n\t\tvoiceTouchStart(e){ \n\t\t\t// 初始化\n\t\t\tthis.isRecording = true\n\t\t\tthis.RecordingStartY = e.changedTouches[0].screenY\n\t\t\tthis.unRecord = false\n\t\t\t// 开始录音\n\t\t\tthis.RECORD.start({\n\t\t\t\tformat:\"mp3\"\n\t\t\t})\n\t\t},\n\t\t// 录音结束\n\t\tvoiceTouchEnd(){\n\t\t\tthis.isRecording = false\n\t\t\t// 停止录音\n\t\t\tthis.RECORD.stop()\n\t\t},\n\t\t// 录音被打断\n\t\tvoiceTouchCancel(){\n\t\t\tthis.isRecording = false\n\t\t\tthis.unRecord = true\n\t\t\t// 停止录音\n\t\t\tthis.RECORD.stop()\n\t\t},\n\t\tvoiceTouchMove(e){\n\t\t\tlet Y = Math.abs(e.changedTouches[0].screenY - this.RecordingStartY)\n\t\t\tthis.unRecord = (Y >= 50)\n\t\t},\n\t\t// 打开聊天信息设置\n\t\topenChatSet(){\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../chat-set/chat-set',\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}