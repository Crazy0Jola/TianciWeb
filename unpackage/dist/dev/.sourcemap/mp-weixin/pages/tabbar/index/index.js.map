{"version":3,"sources":["webpack:///E:/天赐/TianciWeb/main.js","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?e66e","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?51ff","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?a9a7","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?10b3","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?0461","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?7c9c","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?2ed7","webpack:///E:/天赐/TianciWeb/pages/tabbar/index/index.nvue?54d2"],"names":["createPage","Page","_this","JIM","getApp","globalData","components","freeNavBar","freeMediaList","freePopup","data","propIndex","menus","name","event","list","onLoad","uni","$on","isLogin","getConversation","onSuccess","console","log","JSON","stringify","conversations","reverse","onFail","onUnload","$off","onShow","hideLoading","value","getStorageSync","isInit","login","username","password","appkey","random_str","timestamp","Date","getTime","signature","request","url","header","success","res","result","init","computed","getMenusHeight","H","length","getMenusStyle","isTop","mounted","methods","showLoading","title","onMsgReceive","i","messages","content","latest_msg","from_username","msg_type","msg_body","text","extras","isAudio","isVideo","push","setStorageSync","getResource","media_id","updateConversation","$emit","onEventNotification","onSyncConversation","last_content","msgs","j","conversationTimer","setTimeout","clearTimeout","onUserInfUpdate","onSyncEvent","onMsgReceiptChange","onSyncMsgReceipt","onMutiUnreadMsgUpdate","onTransMsgRec","onRoomMsg","showToast","icon","position","code","onTimeout","reLaunch","e","long","x","y","index","item","$refs","extend","show","clickEvent","setTop","delChat","hide","splice"],"mappings":"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","file":"pages/tabbar/index/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/tabbar/index/index.nvue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.nvue?vue&type=template&id=db26057c&\"\nimport script from \"./index.nvue?vue&type=script&lang=js&\"\nexport * from \"./index.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./index.nvue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./index.nvue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('db26057c', component.options)\n    } else {\n      api.reload('db26057c', component.options)\n    }\n    module.hot.accept(\"./index.nvue?vue&type=template&id=db26057c&\", function () {\n      api.rerender('db26057c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"天赐/TianciWeb/pages/tabbar/index/index.nvue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=template&id=db26057c&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.list, function(item, index) {\n    var m0 = _vm.isTop(item.username)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0\n    }\n  })\n\n  var l1 = _vm.__map(_vm.list, function(item, index) {\n    var m1 = _vm.isTop(item.username)\n    return {\n      $orig: _vm.__get_orig(item),\n      m1: m1\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport freeNavBar from \"@/components/free-ui/free-nav-bar.vue\"\n\timport freeMediaList from \"@/components/free-ui/free-media-list.vue\"\n\t\n\timport freePopup from \"@/components/free-ui/free-popup.vue\"\n\timport getCodeMsg from \"@/js_sdk/ErrorCode.js\"\n\tvar _this;\n\tvar JIM=getApp().globalData.JIM;\n\texport default {\n\t\tcomponents:{\n\t\t\tfreeNavBar,\n\t\t\tfreeMediaList,\n\t\t\tfreePopup\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tpropIndex:-1,\n\t\t\t\tmenus:[\n\t\t\t\t\t{\n\t\t\t\t\t\tname:\"设为置顶\",\n\t\t\t\t\t\tevent:\"setTop\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname:\"删除该聊天\",\n\t\t\t\t\t\tevent:\"delChat\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tlist:[]\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tuni.$on(\"JIMinit\",function(){\n\t\t\t\t_this.isLogin();\n\t\t\t})\n\t\t\tuni.$on(\"reInit\",function(){\n\t\t\t\t_this.isLogin();\n\t\t\t})\n\t\t\tuni.$on(\"get_index_msg\",function(){\n\t\t\t\t//获取会话列表\n\t\t\t\tJIM.getConversation().onSuccess(function(data) {\n\t\t\t\t\tconsole.log('success:Conversation222222===========' + JSON.stringify(data));\n\t\t\t\t\t_this.list=data.conversations.reverse();\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\tonUnload(){\n\t\t\tuni.$off(\"get_index_msg\")\n\t\t\tuni.$off(\"JIMinit\")\n\t\t\tuni.$off(\"reInit\")\n\t\t},\n\t\tonShow() {\n\t\t\t_this= this;\n\t\t\t_this.isLogin()\n\t\t\tif(JIM.isLogin()){\n\t\t\t\t// uni.showLoading({\n\t\t\t\t// \ttitle:\"读取消息列表中...\"\n\t\t\t\t// })\n\t\t\t\t\n\t\t\t\t//获取会话列表\n\t\t\t\tJIM.getConversation().onSuccess(function(data) {\n\t\t\t\t\tconsole.log('success:Conversation222222===========' + JSON.stringify(data));\n\t\t\t\t\t_this.list=data.conversations.reverse();\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tconst value = uni.getStorageSync('setUserData');\n\t\t\t\tif (value) {\n\t\t\t\t\t//有登录信息\n\t\t\t\t\tconsole.log(\"已登录用户：\",value);\t\n\t\t\t\t\tif(JIM.isInit()){\n\t\t\t\t\t\t_this.login(value.username,value.password)\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar appkey='09970876f33e884a3624335c';\n\t\t\t\t\t\tvar random_str=\"NkSYvAH3yAw93dqdlto47G9A35xHv4Oa\";\n\t\t\t\t\t\tvar timestamp=(new Date()).getTime();\n\t\t\t\t\t\tvar signature;\n\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\turl: 'http://117.83.152.39:8081/interconnect/appUser/getJMKey',\n\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\"token\": 'e463192ddfad487682638189f64020b9',\n\t\t\t\t\t\t\t\t\"Content-Type\":\"application/json\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata:{\n\t\t\t\t\t\t\t\ttimestamp:timestamp\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\tsignature = res.data.result;\n\t\t\t\t\t\t\t\tconsole.log(signature)\n\t\t\t\t\t\t\t\tJIM.init({\n\t\t\t\t\t\t\t\t\t\t  \"appkey\"    : appkey,\n\t\t\t\t\t\t\t\t\t\t  \"random_str\": random_str,\n\t\t\t\t\t\t\t\t\t\t  \"signature\" : signature,\n\t\t\t\t\t\t\t\t\t\t  \"timestamp\" : timestamp,\n\t\t\t\t\t\t\t\t\t\t  \"flag\":1\n\t\t\t\t\t\t\t\t}).onSuccess(function(data) {\n\t\t\t\t\t\t\t\t\tconsole.log('Init-success:' + JSON.stringify(data));\t\n\t\t\t\t\t\t\t\t\t_this.login(value.username,value.password)\t\n\t\t\t\t\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t\t\t\t    console.log('Init-error:' + JSON.stringify(data))\t\t    \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t},\n \t\tcomputed:{\n\t\t\t// 动态获取菜单高度\n\t\t\tgetMenusHeight(){\n\t\t\t\tlet H = 100\n\t\t\t\treturn this.menus.length * H\n\t\t\t},\n\t\t\t// 获取菜单的样式\n\t\t\tgetMenusStyle(){\n\t\t\t\treturn `height: ${this.getMenusHeight}rpx;`\n\t\t\t},\n\t\t\tisTop(){\n\t\t\t\treturn function(username){\n\t\t\t\t\tif(uni.getStorageSync(username+\"isTop\")){\n\t\t\t\t\t\treturn uni.getStorageSync(username+\"isTop\")\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\n\t\t},\n\t\tmethods: {\n\t\t\tlogin(username,password){\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:\"读取消息列表中...\"\n\t\t\t\t})\n\t\t\t\tJIM.login({\n\t\t\t\t    'username' :username,\n\t\t\t\t\t'password':password\n\t\t\t\t}).onSuccess(function(data) {\t\t\n\t\t\t\t\t\n\t\t\t\t    JIM.onMsgReceive(function(data) {\n\t\t\t\t\t\tconsole.log(JSON.stringify(data)+\"===================================\")\n\t\t\t\t\t\tfor(var i=0;i<data.messages.length;i++){\n\t\t\t\t\t\t\tvar content = data.messages[i].content;\n\t\t\t\t\t\t\tvar latest_msg;\n\t\t\t\t\t\t\tvar username = data.messages[i].from_username;\n\t\t\t\t\t\t\tvar list = uni.getStorageSync(username);\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 分类型进行判断\n\t\t\t\t\t\t\tif(content.msg_type==\"text\"){\n\t\t\t\t\t\t\t\tlatest_msg = content.msg_body.text;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(content.msg_type==\"image\"){\n\t\t\t\t\t\t\t\tlatest_msg = \"[图片]\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(content.msg_type==\"file\"){\n\t\t\t\t\t\t\t\tif(content.msg_body.extras.isAudio){\n\t\t\t\t\t\t\t\t\tlatest_msg = \"[语音]\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(content.msg_body.extras.isVideo){\n\t\t\t\t\t\t\t\t\tlatest_msg = \"[短视频]\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(content.msg_type==\"text\"){\n\t\t\t\t\t\t\t\tif(list){\n\t\t\t\t\t\t\t\t\tlist.push(content);\n\t\t\t\t\t\t\t\t\tuni.setStorageSync(username,list);\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tJIM.getResource({\n\t\t\t\t\t\t\t\t\t'media_id' : content.msg_body.media_id,\n\t\t\t\t\t\t\t\t}).onSuccess(function(data) {\n\t\t\t\t\t\t\t\t\tcontent.msg_body.media_id=data.url;\n\t\t\t\t\t\t\t\t\tif(list){\n\t\t\t\t\t\t\t\t\t\tlist.push(content);\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(username,list);\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t\t\t\t\t//data.code 返回码\n\t\t\t\t\t\t\t\t\t//data.message 描述\n\t\t\t\t\t\t\t\t});\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t\t\t   'username' : username,\n\t\t\t\t\t\t\t   'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t        console.log('msg_receive:' + JSON.stringify(data));\t\t\n\t\t\t\n\t\t\t\t\t\t//获取会话列表\n\t\t\t\t\t\tJIM.getConversation().onSuccess(function(data) {\n\t\t\t\t\t\t\tconsole.log('success:Conversation33333333===========' + JSON.stringify(data));\n\t\t\t\t\t\t\t_this.list=data.conversations.reverse()\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t\t\t});\t\n\t\t\t\n\t\t\t\t\t\tuni.$emit('get_index_msg',{})\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.$emit('get_chat_msg',{})\n\t\t\t\t    });\n\t\t\t\t\t\n\t\t\t\t    JIM.onEventNotification(function(data) {\n\t\t\t\t        console.log('event_receive: ' + JSON.stringify(data));\n\t\t\t\t    });\n\t\t\t\t\t\n\t\t\t\t\tJIM.onSyncConversation(function(data) { //离线消息同步监听\n\t\t\t\t        for(var i=0;i<data.length;i++){\n\t\t\t\t        \tvar latest_msg;\n\t\t\t\t        \tvar last_content= data[i].msgs[data[i].msgs.length-1].content;\n\t\t\t\t        \tvar username = data[i].from_username\n\t\t\t\t\t\t\tvar list = uni.getStorageSync(username);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tfor(var j=0;j<data[i].msgs.length;j++){\n\t\t\t\t\t\t\t\tvar content = data[i].msgs[j].content;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(content.msg_type==\"text\"){\n\t\t\t\t\t\t\t\t\tif(list){\n\t\t\t\t\t\t\t\t\t\tlist.push(content);\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(username,list);\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tJIM.getResource({\n\t\t\t\t\t\t\t\t\t\t'media_id' : content.msg_body.media_id,\n\t\t\t\t\t\t\t\t\t}).onSuccess(function(data) {\n\t\t\t\t\t\t\t\t\t\tcontent.msg_body.media_id=data.url;\n\t\t\t\t\t\t\t\t\t\tif(list){\n\t\t\t\t\t\t\t\t\t\t\tlist.push(content);\n\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(username,list);\t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t\t\t\t\t\t//data.code 返回码\n\t\t\t\t\t\t\t\t\t\t//data.message 描述\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 分类型进行判断\n\t\t\t\t\t\t\tif(last_content.msg_type==\"text\"){\n\t\t\t\t\t\t\t\tlatest_msg = last_content.msg_body.text;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(last_content.msg_type==\"image\"){\n\t\t\t\t\t\t\t\tlatest_msg = \"[图片]\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(last_content.msg_type==\"file\"){\n\t\t\t\t\t\t\t\tif(content.msg_body.extras.isAudio){\n\t\t\t\t\t\t\t\t\tlatest_msg = \"[语音]\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(content.msg_body.extras.isVideo){\n\t\t\t\t\t\t\t\t\tlatest_msg = \"[短视频]\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tJIM.updateConversation({\n\t\t\t\t\t\t\t 'username' : username,\n\t\t\t\t\t\t\t 'extras' : {'latest_msg':latest_msg}\n\t\t\t\t\t\t\t});\t \n\t\t\t\t\t\t\t \t\n\t\t\t\t        }\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar conversationTimer = setTimeout(()=>{\n\t\t\t\t\t\t\t//获取会话列表\n\t\t\t\t\t\t\tJIM.getConversation().onSuccess(function(data) {\n\t\t\t\t\t\t\t\tconsole.log('success:Conversation3333===========' + JSON.stringify(data));\n\t\t\t\t\t\t\t\t_this.list=data.conversations.reverse();\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t\t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tclearTimeout(conversationTimer)\n\t\t\t\t\t\t},500)\n\t\t\t\t\t\t\n\t\t\t\t    });\n\t\t\t\t\t\n\t\t\t\t    JIM.onUserInfUpdate(function(data) {\n\t\t\t\t        console.log('onUserInfUpdate : ' + JSON.stringify(data));\n\t\t\t\t    });\n\t\t\t\t\t \n\t\t\t\t    JIM.onSyncEvent(function(data) {\n\t\t\t\t        console.log('onSyncEvent : ' + JSON.stringify(data));\n\t\t\t\t    });\n\t\t\t\t\t\n\t\t\t\t\tJIM.onMsgReceiptChange(function(data){\n\t\t\t\t\t    console.log('onMsgReceiptChange : ' + JSON.stringify(data));\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tJIM.onSyncMsgReceipt(function(data){\n\t\t\t\t\t    console.log('onSyncMsgReceipt : ' + JSON.stringify(data));\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tJIM.onMutiUnreadMsgUpdate(function(data){\n\t\t\t\t\t    console.log('onConversationUpdate : ' + JSON.stringify(data));\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t    JIM.onTransMsgRec(function(data){\n\t\t\t\t\t    console.log('onTransMsgRec : ' + JSON.stringify(data));\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tJIM.onRoomMsg (function(data){\n\t\t\t\t\t    console.log('onRoomMsg  : ' + JSON.stringify(data));\n\t\t\t\t\t});\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t//获取会话列表\n\t\t\t\t\tJIM.getConversation().onSuccess(function(data) {\n\t\t\t\t\t\tconsole.log('success:Conversation===========' + JSON.stringify(data));\n\t\t\t\t\t\t_this.list=data.conversations.reverse();\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t     console.log('error:' + JSON.stringify(data));\n\t\t\t\t\t uni.showToast({\n\t\t\t\t\t \ticon: 'none',\n\t\t\t\t\t \tposition: 'bottom',\n\t\t\t\t\t \ttitle: getCodeMsg(data.code)\n\t\t\t\t\t });\t\t\t\t\t \n\t\t\t\t}).onTimeout(function(data) {\n\t\t\t\t    console.log('timeout:' + JSON.stringify(data));\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\ttitle: '登录超时！'\n\t\t\t\t\t});\t\t\t\t\t\n\t\t\t\t});\t\t\n\t\t\t},\n\t\t\tisLogin(){\n\t\t\t\t//判断缓存中是否登录过，直接登录\n\t\t\t\ttry {\n\t\t\t\t\tconst value = uni.getStorageSync('setUserData');\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t//有登录信息\n\t\t\t\t\t\tconsole.log(\"已登录用户：\",value);\t\n\t\t\t\t\t\tif(!JIM.isLogin()){\n\t\t\t\t\t\t\t_this.login(value.username,value.password)\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl: '../../login/login',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// error\n\t\t\t\t} \n\t\t\t},\n\t\t\tlong({x,y,index}){\n\t\t\t\t// 初始化 索引\n\t\t\t\tthis.propIndex = index\n\t\t\t\t// 拿到当前对象\n\t\t\t\tlet item = this.list[index]\n\t\t\t\tvar isTop = uni.getStorageSync(item.username+\"isTop\")||false;\n\t\t\t\t// 判断之前是否处于置顶状态\n\t\t\t\tthis.menus[0].name = isTop ? '取消置顶' : '设为置顶'\n\t\t\t\t\n\t\t\t\tthis.$refs.extend.show(x,y)\n\t\t\t},\n\t\t\t// 分发菜单事件\n\t\t\tclickEvent(event){\n\t\t\t\tswitch (event){\n\t\t\t\t\tcase \"setTop\": // 置顶/取消置顶会话\n\t\t\t\t\tthis.setTop()\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"delChat\": // 删除当前会话\n\t\t\t\t\tthis.delChat()\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.$refs.extend.hide()\n\t\t\t},\n\t\t\t// 删除当前会话\n\t\t\tdelChat(){\n\t\t\t\tlet item = this.list[this.propIndex]\n\t\t\t\tthis.list.splice(this.propIndex,1)\n\t\t\t\tJIM.updateConversation({\n\t\t\t\t   'username' : item.username,\n\t\t\t\t   'extras' : {'del':true}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 置顶/取消置顶会话\n\t\t\tsetTop(){\n\t\t\t\tlet item = this.list[this.propIndex]\n\t\t\t\tvar isTop = uni.getStorageSync(item.username+\"isTop\")||false;\n\t\t\t\tuni.setStorageSync(item.username+\"isTop\",!isTop);\n\t\t\t\t//获取会话列表\n\t\t\t\tJIM.getConversation().onSuccess(function(data) {\n\t\t\t\t\tconsole.log('success:Conversation222222===========' + JSON.stringify(data));\n\t\t\t\t\t_this.list=data.conversations.reverse();\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}).onFail(function(data) {\n\t\t\t\t\tconsole.log('error:' + JSON.stringify(data));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=1&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}